"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[368],{2368:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(5466),o=n(2255),l=n(7727),c=function(e){var t=e.item;return r.createElement(r.Fragment,null,t.name)};const a=r.memo(c);var i=function(e){var t,n,c=e.order,i=!1,u=(0,o.I0)();return console.log(c),r.createElement("tr",null,(t=new Date,n=new Date(c.date.toString()),void((t.getTime()-n.getTime())/864e5>=2&&(i=!0))),r.createElement("td",null,c.order.map((function(e){return r.createElement(a,{item:e,key:e._id})}))),r.createElement("td",null,c.date),i?r.createElement("td",null,"Delivered"):r.createElement("td",null,"Processing"),i?r.createElement("td",null):r.createElement("td",null," ",r.createElement("button",{onClick:function(e){console.log("you cliecked cancel deleting "+c._id),u((0,l.i5)(c._id)),e.preventDefault()}},"cancel")," "))};const u=r.memo(i),d=function(e){var t=(0,o.v9)((function(e){return e.userReducer.user})),n=(0,o.v9)((function(e){return e.orderReducer})),c=(0,o.I0)();return(0,r.useEffect)((function(){c((0,l.xK)(t._id))}),[]),console.log("orderlist is "+n),r.createElement(r.Fragment,null,r.createElement("h1",null,"RECENT ORDER"),r.createElement("h4",null,"USER ID : ",t._id),n?r.createElement(r.Fragment,null,r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Order"),r.createElement("th",null,"Date"),e.readOnly?"":r.createElement(r.Fragment,null,r.createElement("th",null,"Status"),r.createElement("th",null,"Edit")))),r.createElement("tbody",null,n.map((function(e){return r.createElement(u,{order:e,key:e._id})})))),r.createElement("button",{onClick:function(e){console.log("after orderlis is "+n),c((0,l.i5)(n._id)),console.log("after dispatching orderlis is "+order._id),e.preventDefault()}},"Save")):"")}},7727:(e,t,n)=>{n.d(t,{Mk:()=>i,i5:()=>c,xK:()=>a});var r=n(2387);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){return{type:r.UI,payload:e}},c=function(e){return console.log("delete order from db is called "+e),function(t){window.fetch("http://localhost:9000/order/api/delete",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({orderid:e})}).then((function(e){return e.json()})).then((function(n){var o;t((o=e,{type:r.QD,payload:o})),console.log("successfully deleted order from dm ")})).catch((function(e){console.log("error while deleting order from db "+e)}))}},a=function(e){return function(t){window.fetch("http://localhost:9000/order/api/get",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userid:e})}).then((function(e){return e.json()})).then((function(e){if(console.log("successfully retrieved order from db "+e),t({type:r.sE}),e){var n,c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw c}}}}(e);try{for(c.s();!(n=c.n()).done;){var a=n.value;t(l(a))}}catch(e){c.e(e)}finally{c.f()}}})).catch((function(e){console.log("error while retrieving order from db "+e)}))}},i=function(e){return function(t){window.fetch("http://localhost:9000/order/api/save",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("successfully saved order to db "),t(l(e))})).catch((function(e){console.log("error while saving order to db "+e)}))}}}}]);